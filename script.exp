#!/usr/bin/expect -f
#
# This Expect script was generated by autoexpect on Tue Jul 28 13:33:42 2020
# Expect and autoexpect were both written by Don Libes, NIST.
#
# Note that autoexpect does not guarantee a working script.  It
# necessarily has to guess about certain things.  Two reasons a script
# might fail are:
#
# 1) timing - A surprising number of programs (rn, ksh, zsh, telnet,
# etc.) and devices discard or ignore keystrokes that arrive "too
# quickly" after prompts.  If you find your new script hanging up at
# one spot, try adding a short sleep just before the previous send.
# Setting "force_conservative" to 1 (see below) makes Expect do this
# automatically - pausing briefly before sending each character.  This
# pacifies every program I know of.  The -c flag makes the script do
# this in the first place.  The -C flag allows you to define a
# character to toggle this mode off and on.

set force_conservative 0  ;# set to 1 to force conservative mode even if
			  ;# script wasn't run conservatively originally
if {$force_conservative} {
	set send_slow {1 .1}
	proc send {ignore arg} {
		sleep .1
		exp_send -s -- $arg
	}
}

#
# 2) differing output - Some programs produce different output each time
# they run.  The "date" command is an obvious example.  Another is
# ftp, if it produces throughput statistics at the end of a file
# transfer.  If this causes a problem, delete these patterns or replace
# them with wildcards.  An alternative is to use the -p flag (for
# "prompt") which makes Expect only look for the last line of output
# (i.e., the prompt).  The -P flag allows you to define a character to
# toggle this mode off and on.
#
# Read the man page for more info.
#
# -Don


set timeout -1
spawn $env(SHELL)
match_max 100000
expect -exact "\]0;ec2-user@ip-172-31-40-194:~/ea_v1/demo\[?1034h\[ec2-user@ip-172-31-40-194 demo\]\$ "
send -- "git add -A\r"
expect -exact "git add -A\r
\]0;ec2-user@ip-172-31-40-194:~/ea_v1/demo\[ec2-user@ip-172-31-40-194 demo\]\$ "
send -- "git commit -m \"aws auto commit - dt"
expect -exact "\[K"
send -- "ata update\"\r"
expect -exact "ata update\"\r
\[master 9eb46c1\] aws auto commit - data update\r
 Committer: EC2 Default User <ec2-user@ip-172-31-40-194.us-east-2.compute.internal>\r
Ihr Name und E-Mail Adresse wurden automatisch auf Basis\r
Ihres Benutzer- und Rechnernamens konfiguriert. Bitte prÃ¼fen Sie, dass\r
diese zutreffend sind. Sie kÃ¶nnen diese Meldung unterdrÃ¼cken, indem Sie\r
diese explizit setzen. FÃ¼hren Sie dazu den folgenden Befehl aus und folgen\r
Sie den Anweisungen in Ihrem Editor, um die Konfigurationsdatei zu bearbeiten:\r
\r
    git config --global --edit\r
\r
Nachdem Sie das getan haben, kÃ¶nnen Sie Ihre IdentitÃ¤t fÃ¼r diesen Commit\r
Ã¤ndern mit:\r
\r
    git commit --amend --reset-author\r
\r
 1 file changed, 0 insertions(+), 0 deletions(-)\r
 create mode 100755 script.exp\r
\]0;ec2-user@ip-172-31-40-194:~/ea_v1/demo\[ec2-user@ip-172-31-40-194 demo\]\$ "
send -- "git push origin master\r"
expect -exact "git push origin master\r
Warning: Permanently added the RSA host key for IP address '140.82.112.4' to the list of known hosts.\r\r
Enter passphrase for key '/home/ec2-user/.ssh/id_rsa': "
send -- "Aus2025-KI-Ss161!\r"
expect -exact "\r
ZÃ¤hle Objekte: 9, Fertig.\r
Delta compression using up to 2 threads.\r
Komprimiere Objekte:  11% (1/9)   \rKomprimiere Objekte:  22% (2/9)   \rKomprimiere Objekte:  33% (3/9)   \rKomprimiere Objekte:  44% (4/9)   \rKomprimiere Objekte:  55% (5/9)   \rKomprimiere Objekte:  66% (6/9)   \rKomprimiere Objekte:  77% (7/9)   \rKomprimiere Objekte:  88% (8/9)   \rKomprimiere Objekte: 100% (9/9)   \rKomprimiere Objekte: 100% (9/9), Fertig.\r
Schreibe Objekte:  11% (1/9)   \rSchreibe Objekte:  22% (2/9)   \rSchreibe Objekte:  33% (3/9)   \rSchreibe Objekte:  44% (4/9)   \rSchreibe Objekte:  55% (5/9)   \rSchreibe Objekte:  66% (6/9)   \rSchreibe Objekte:  77% (7/9)   \rSchreibe Objekte:  88% (8/9)   \rSchreibe Objekte: 100% (9/9)   \rSchreibe Objekte: 100% (9/9), 1.02 KiB | 1.02 MiB/s, Fertig.\r
Total 9 (delta 5), reused 0 (delta 0)\r
remote: Resolving deltas:   0% (0/5)\[K\rremote: Resolving deltas:  20% (1/5)\[K\rremote: Resolving deltas:  40% (2/5)\[K\rremote: Resolving deltas: 100% (5/5)\[K\rremote: Resolving deltas: 100% (5/5), completed with 1 local object.\[K\r
To github.com:FabrizioPuzzo/aws_ea.git\r
   3c91976..9eb46c1  master -> master\r
\]0;ec2-user@ip-172-31-40-194:~/ea_v1/demo\[ec2-user@ip-172-31-40-194 demo\]\$ "
send -- ""
expect eof
